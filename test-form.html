<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remote Genius Form Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        button {
            background: #3B82F6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background: #2563EB;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            display: none;
        }
        .success {
            background: #D4EDDA;
            color: #155724;
            border: 1px solid #C3E6CB;
        }
        .error {
            background: #F8D7DA;
            color: #721C24;
            border: 1px solid #F5C6CB;
        }
        .info {
            background: #D1ECF1;
            color: #0C5460;
            border: 1px solid #BEE5EB;
        }
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Remote Genius Form Test</h1>
        
        <button onclick="testGoogleScript()">1. Google Script ì—°ê²° í…ŒìŠ¤íŠ¸</button>
        <button onclick="testFormSubmit()">2. í¼ ì œì¶œ í…ŒìŠ¤íŠ¸</button>
        <button onclick="testSlackDirect()">3. Slack ì§ì ‘ í…ŒìŠ¤íŠ¸ (CORS ì—ëŸ¬ ì˜ˆìƒ)</button>
        
        <div id="result" class="result"></div>
    </div>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxeCF8RcvqRRdnNDS9j0kt_MfTqrVrWphwsVKV5d31fnb2MZm7Ux4HZ_M8ewb3S5U7yjA/exec';
        const SLACK_WEBHOOK_URL = 'https://hooks.slack.com/services/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';
        
        function showResult(message, type = 'info') {
            const resultDiv = document.getElementById('result');
            resultDiv.className = `result ${type}`;
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `<pre>${message}</pre>`;
        }
        
        // 1. Google Script ì—°ê²° í…ŒìŠ¤íŠ¸
        async function testGoogleScript() {
            showResult('Google Script ì—°ê²° í…ŒìŠ¤íŠ¸ ì¤‘...', 'info');
            
            try {
                const response = await fetch(SCRIPT_URL);
                const data = await response.json();
                showResult(`âœ… ì„±ê³µ!\n\n${JSON.stringify(data, null, 2)}`, 'success');
            } catch (error) {
                showResult(`âŒ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        // 2. í¼ ì œì¶œ í…ŒìŠ¤íŠ¸
        async function testFormSubmit() {
            showResult('í¼ ë°ì´í„° ì „ì†¡ ì¤‘...', 'info');
            
            const testData = {
                timestamp: new Date().toLocaleString('ko-KR'),
                company: 'í…ŒìŠ¤íŠ¸ íšŒì‚¬',
                name: 'í…ŒìŠ¤íŠ¸ ë‹´ë‹¹ì',
                position: 'ëŒ€í‘œ',
                phone: '010-1234-5678',
                email: 'test@example.com',
                jobs: 'ì›¹ ê°œë°œì, ë””ìì´ë„ˆ',
                urgency: 'ì¦‰ì‹œ',
                headcount: '2ëª…',
                budget: '300ë§Œì›',
                period: '6ê°œì›”',
                description: 'í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸ ì„¤ëª…ì…ë‹ˆë‹¤.',
                skills: 'React, Node.js, TypeScript'
            };
            
            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testData)
                });
                
                // no-cors ëª¨ë“œì—ì„œëŠ” ì‘ë‹µì„ ì½ì„ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì„±ê³µìœ¼ë¡œ ê°„ì£¼
                showResult(`âœ… ìš”ì²­ ì „ì†¡ ì™„ë£Œ!\n\nSlack ì±„ë„ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\n\nì „ì†¡ëœ ë°ì´í„°:\n${JSON.stringify(testData, null, 2)}`, 'success');
            } catch (error) {
                showResult(`âŒ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        // 3. Slack ì§ì ‘ í…ŒìŠ¤íŠ¸ (CORS ì—ëŸ¬ ì˜ˆìƒ)
        async function testSlackDirect() {
            showResult('Slack Webhook ì§ì ‘ í…ŒìŠ¤íŠ¸ ì¤‘... (CORS ì—ëŸ¬ ì˜ˆìƒ)', 'info');
            
            const slackMessage = {
                text: "ğŸ§ª í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€: Remote Genius Form Handler í…ŒìŠ¤íŠ¸"
            };
            
            try {
                const response = await fetch(SLACK_WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(slackMessage)
                });
                
                if (response.ok) {
                    showResult('âœ… Slack ì „ì†¡ ì„±ê³µ!', 'success');
                } else {
                    showResult(`âŒ Slack ì‘ë‹µ: ${response.status}`, 'error');
                }
            } catch (error) {
                showResult(`âš ï¸ ì˜ˆìƒëœ CORS ì—ëŸ¬:\n${error.message}\n\nì´ëŠ” ì •ìƒì…ë‹ˆë‹¤. Slack Webhookì€ ì„œë²„(Google Apps Script)ë¥¼ í†µí•´ì„œë§Œ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.`, 'error');
            }
        }
    </script>
</body>
</html>